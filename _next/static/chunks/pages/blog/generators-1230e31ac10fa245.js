(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4236],{4368:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/generators",function(){return t(53113)}])},53113:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return c},meta:function(){return i}});var r=t(85893),s=t(11151),o=t(47439);let i={path:"/blog/generators",title:"Generators, the forgotten spec",date:"2019-04-28T00:00:00.000Z",type:"post",description:"In a time just before the rise of the Promises, they came and fell to oblivion in a blink. Sadly nobody uses them, including me, but generators are still in the game (or not). Maybe you remember this strange yield expression or the tiny * declaration to transform your dummy function into a beautiful generator."},a=e=>{let{children:n}=e;return(0,r.jsx)(o.Z,{meta:i,children:n})};function l(e){let n={a:"a",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["In a time just before the rise of the Promises, they came and fell to oblivion in a blink. Sadly nobody uses them, including me, but ",(0,r.jsx)(n.strong,{children:"generators are still in the game"})," (or not). Maybe you remember this strange ",(0,r.jsx)(n.code,{children:"yield"})," expression or the tiny ",(0,r.jsx)(n.code,{children:"*"})," declaration to transform your dummy function into a beautiful generator."]}),"\n",(0,r.jsxs)(n.p,{children:["So yes, you can use ",(0,r.jsx)(n.code,{children:"Promise"}),", ",(0,r.jsx)(n.code,{children:"async/await"}),", almost any ",(0,r.jsx)(n.code,{children:"Array"}),"  methods or even recursions to do exactly what generators can do AND without the need of knowing them. It's a fact and I'm the first to approach my code this way, but maybe, we can take a closer look and try to use all the goodness that JavaScript as to offer, generators included."]}),"\n",(0,r.jsx)(n.h2,{children:"A simple form"}),"\n",(0,r.jsxs)(n.p,{children:["Add a star (",(0,r.jsx)(n.code,{children:"*"}),") to your function declaration, multiple returns (",(0,r.jsx)(n.code,{children:"yield"}),") and voil\xe0, you just have created a generator!"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const generator = function* () {\n  yield 1;\n  yield 2;\n  yield 3;\n};\n\nconst counter = generator();\nconsole.log(counter.next()); // {value: 1, done: false}\nconsole.log(counter.next()); // {value: 2, done: false}\nconsole.log(counter.next()); // {value: 3, done: false}\nconsole.log(counter.next()); // {value: undefined, done: true}\n"})}),"\n",(0,r.jsx)(n.h2,{children:"A simple API"}),"\n",(0,r.jsx)(n.p,{children:"There are only three methods attached to the Generator's prototype :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".next()"}),": return the next “yielded” value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".return()"}),": return the given value and force the generator to end (kill switch)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".throw()"}),": throw an error to the generator and finish it in a more ",(0,r.jsx)(n.em,{children:"errorish"})," way"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{children:"When to use it ?"}),"\n",(0,r.jsxs)(n.p,{children:["Generators are very useful ",(0,r.jsx)(n.strong,{children:"when you need a method that you can replay on demand with some kind of inner evolution"}),". Something not as autonomous as a recursive method and not as dummy as a multi-parameters function. In summary, an iterator."]}),"\n",(0,r.jsxs)(n.p,{children:["In the following example, we want to add a new item to our list when clicking on a button, but with a maximum of ",(0,r.jsx)(n.code,{children:"10"})," items :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const itemMaker = function* ({ max }) {\n  for (let i = 0; i <= max; i++) {\n    const item = document.createElement('li');\n    item.innerHTML = `item #${i}`;\n    yield item;\n  }\n};\n\nconst items = itemMaker({ max: 10 });\nconst list = document.getElementById('list');\nconst button = document.getElementById('btn');\n\nbutton.addEventListener('click', () => {\n  const newItem = items.next();\n  if (!newItem.done) list.appendChild(newItem.value);\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["It illustrates how cool generator can be in that case. You can ",(0,r.jsx)(n.strong,{children:"keep the iteration logic inside"})," your method, no need to keep track of the current or last index in an external variable. Simple, clear, elegant, plus the useful ",(0,r.jsx)(n.code,{children:"done"})," value to check the progress."]}),"\n",(0,r.jsx)(n.h2,{children:"Conclusion"}),"\n",(0,r.jsxs)(n.p,{children:["Generators are maybe not the most used JavaScript expression, but still, there are cases where they can be very handy. See it as a special type of iterator. Now, it's your call to choose if you prefer generators over the very appealing ",(0,r.jsx)(n.code,{children:"async/await"})," syntax :innocent:"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"Supported with"})," \uD83D\uDC9B ",(0,r.jsxs)(n.em,{children:["by ",(0,r.jsx)(n.a,{href:"https://antistatique.net",children:"Antistatique"})]})]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(a,{...e,children:(0,r.jsx)(l,{...e})})}},62090:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(85893);t(67294);var s=t(90512),o=t(41664),i=t.n(o),a=t(68658),l=t(81612),c=e=>{let{crumbs:n}=e;return(0,r.jsx)("nav",{"aria-label":"breadcrumb",className:"mb-6 transform md:translate-x-1 md:mb-0",children:(0,r.jsxs)("ol",{className:"inline-flex text-sm text-gray-600 lowercase md:text-lg opacity-60 hover:opacity-100 duration-500 transition-opacity transform md:-translate-x-full md:translate-y-2 md:-rotate-90 md:origin-right",children:[(0,r.jsx)("li",{children:(0,r.jsxs)(i(),{href:"/",className:"link",children:[(0,r.jsx)("span",{className:"sr-only",children:"Homepage"}),(0,r.jsx)(l.Z,{name:"tipi",className:"text-base md:text-lg"})]})}),n.map((e,n)=>{let{href:t,label:o}=e;return(0,a.Z)(t)?(0,r.jsxs)("li",{"aria-current":"page",children:[(0,r.jsx)("span",{className:"px-3","aria-hidden":!0,children:"\xb7"}),(0,r.jsx)("span",{className:(0,s.Z)("inline-block truncate",{maxWidth:250}),children:o})]},"crumb-".concat(n)):(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"px-3","aria-hidden":!0,children:"\xb7"}),(0,r.jsx)(i(),{href:t,className:"link",children:o})]},"crumb-".concat(n))})]})})}},47439:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(85893);t(67294);var s=t(47906),o=t(63595),i=t(62090),a=t(73574),l=t(29454),c=t(53659),d=t(8523),h=t(35045),u=e=>{let{children:n,meta:t}=e;return(0,r.jsxs)(c.Z,{outsideChildren:(0,r.jsx)(d.Z,{}),children:[(0,r.jsx)(h.Z,{title:t.title,description:t.description}),(0,r.jsx)(i.Z,{crumbs:[{href:"/blog",label:"Blog"},{label:t.title}]}),(0,r.jsxs)("article",{className:"w-full mx-auto mt-20 sm:w-10/12 md:w-2/3 xl:w-7/12 md:px-8",children:[(0,r.jsxs)(l.Z,{move:!1,children:[(0,r.jsx)("h1",{className:"text-3xl font-medium text-gray-900 md:text-4xl lg:text-5xl",children:t.title}),(0,r.jsx)(a.Z,{children:(0,r.jsxs)("h2",{className:"font-medium md:text-lg",children:[(0,r.jsx)("span",{children:"Yann Gouffon — "}),(0,s.WU)((0,o.D)(t.date),"PPP")]})})]}),(0,r.jsx)(l.Z,{className:"mt-16 font-serif text-lg text-gray-900 space-y-6 md:mt-14 prose-headings:pt-4 prose-p:leading-[1.618em] lg:text-xl xl:text-2xl xl:prose-p:leading-[1.618em] prose-a:text-blue prose-headings:font-sans prose-headings:font-medium prose-h2:text-[26px] xl:prose-h2:text-[28px] prose-h3:text-[19px] lg:prose-h3:text-[24px] xl:prose-h3:text-[27px] prose-h4:text-[18px] lg:prose-h4:text-[21px] xl:prose-h4:text-[25px] prose-strong:text-medium prose-ul:list-disc prose-ul:pl-3 prose-ul:space-y-3 prose-ul:leading-[1.618em] xl:prose-figure:w-[106%] xl:prose-figure:-translate-x-[2.8%] prose-figure:rounded-lg prose-figure:overflow-hidden prose-figure:my-8",children:n})]})]})}}},function(e){e.O(0,[1635,9757,3880,520,5098,7539,8523,2888,9774,179],function(){return e(e.s=4368)}),_N_E=e.O()}]);