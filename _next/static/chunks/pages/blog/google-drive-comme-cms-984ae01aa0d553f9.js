(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1851],{38919:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/google-drive-comme-cms",function(){return n(48515)}])},48515:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return d},meta:function(){return i}});var r=n(85893),t=n(11151),o=n(47439);let i={path:"/blog/google-drive-comme-cms",title:"Google Drive comme CMS !",date:"2014-03-11T13:05:25.000Z",type:"post",description:"N'avez-vous jamais r\xeav\xe9 de mettre en place une petite administration pour votre site afin d'y ajouter ou d'y modifier du contenu sans douleur ? Maintenant, avec Google, c'est possible !"},a=e=>{let{children:s}=e;return(0,r.jsx)(o.Z,{meta:i,children:s})};function l(e){let s={a:"a",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"N'avez-vous jamais r\xeav\xe9 de mettre en place une petite administration pour votre site afin d'y ajouter ou d'y modifier du contenu sans douleur ? Maintenant, avec Google, c'est possible !"}),"\n",(0,r.jsx)(s.p,{children:'Google, avec son Drive, propose en effet de cr\xe9er et de stocker dans le cloud des documents de plusieurs types diff\xe9rents; des documents textes, des tableurs, des pr\xe9sentations et m\xeame des formulaires. Dans notre cas, nous allons utiliser les formulaires et les tableurs, ou "spreadsheet".'}),"\n",(0,r.jsx)(s.h2,{children:"Le concept"}),"\n",(0,r.jsx)(s.p,{children:"Comme dans une administration classique, nous allons utiliser un formulaire, li\xe9 \xe0 une spreadsheet o\xf9 nous irons rechercher les donn\xe9es pr\xe9c\xe9demment entr\xe9es."}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"Quelle diff\xe9rence avec une base de donn\xe9e ?"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Aucune, le syst\xe8me est le m\xeame, mais l'avantage de ce syst\xe8me est sa rapidit\xe9 de mise en place. On pourra donc l'utiliser pour une quantit\xe9 r\xe9duite de donn\xe9es et une structure \xe0 une table."}),"\n",(0,r.jsx)(s.p,{children:"Dans notre exemple, nous allons cr\xe9er une petite administration afin d'ajouter et d'afficher la liste des membres de notre association (fictive)."}),"\n",(0,r.jsx)(s.h2,{children:"Ajouter des membres"}),"\n",(0,r.jsx)(s.p,{children:'Pour cela, nous allons commencer par cr\xe9er un nouveau formulaire que nous nommerons "Ajout de membres" avec les champs nom, pr\xe9nom et E-mail. Ensuite, avec "Choisir une destination pour la r\xe9ponse", nous allons lui assigner une nouvelle spreadsheet que nous nommerons "Liste des membres".'}),"\n",(0,r.jsxs)(s.p,{children:["Maintenant, vous pourriez tr\xe8s bien partager le ",(0,r.jsx)(s.a,{href:"https://docs.google.com/forms/d/1Le-duty7sC7hRU5vidzYpeMT_Ww7s5mU3c4k4VjXU8k/viewform",children:"lien vers votre formulaire"})," ou simplement l'int\xe9grer sur votre site au moyen de l'iframe propos\xe9. Mais dans les deux cas, l'aspect visuel resterra peu convaincant."]}),"\n",(0,r.jsx)(s.p,{children:"Pour int\xe9grer le formulaire directement sur notre site, il nous suffit de visiter le formulaire comme si nous souhaitions le remplir, puis, en affichant le code source de la page, copier simplement tout l'\xe9l\xe9ment formulaire et le coller dans notre code."}),"\n",(0,r.jsx)(s.p,{children:"Nous devrions donc avoir quelque chose comme \xe7a :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-html",children:'<form action="https://docs.google.com/forms/d/1Le-duty7sC7hRU5vidzYpeMT_Ww7s5mU3c4k4VjXU8k/formResponse" method="POST" id="ss-form" target="_self" onsubmit="">\n...\n</form>\n'})}),"\n",(0,r.jsx)(s.p,{children:"Maintenant, vous constaterez surement qu'apr\xe8s la soumission, nous nous retrouvons avec la m\xeame page toute moche de confirmation."}),"\n",(0,r.jsx)(s.p,{children:"Pour d\xe9finir une page de confirmation diff\xe9rente, il nous suffit de remplacer le :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-html",children:'<form action="https://docs.google.com/forms/d/1Le-duty7sC7hRU5vidzYpeMT_Ww7s5mU3c4k4VjXU8k/formResponse" method="POST" id="ss-form" target="_self" onsubmit="">...</form>\n'})}),"\n",(0,r.jsx)(s.p,{children:"par :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-html",children:'<script type="text/javascript">var submitted=false;</script>\n<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" onload="if(submitted) {window.location=\'http://mon-site.com/ma-page-de-confirmation.html\';}"></iframe>\n<form action="https://docs.google.com/forms/d/1Le-duty7sC7hRU5vidzYpeMT_Ww7s5mU3c4k4VjXU8k/formResponse" method="post" target="hidden_iframe" onsubmit="submitted=true;">...</form>\n'})}),"\n",(0,r.jsx)(s.p,{children:"Nous voici pr\xe8s \xe0 rentrer nos membres ! Maintenant, si nous souhaitions \xeatre les seuls \xe0 pouvoir acc\xe9der \xe0 ce formulaire comme dans une administration classique, rien ne nous emp\xeache de le placer dans un r\xe9pertoire prot\xe9g\xe9 par un .htpasswd."}),"\n",(0,r.jsx)(s.h2,{children:"Afficher les membres"}),"\n",(0,r.jsx)(s.p,{children:"Avant toute chose, il nous faut nous rendre dans notre spreadsheet de r\xe9sultats et la rendre consultable avec le lien (option de partage). Puis, dans Fichier/Publier sur le Web, nous allons d\xe9marrer la publication. Ce sera cette publication, duplicata de notre spreadsheet, qui sera utilis\xe9e pour afficher les donn\xe9es. N'oubliez pas de recopier la cl\xe9 de votre document."}),"\n",(0,r.jsx)(s.p,{children:"La suite est assez simple et m\xeame les profanes \xe0 PHP comprendront ! Nous allons simplement r\xe9cup\xe9rer le JSON sortant de la spreasheet et afficher les \xe9l\xe9ments ligne par ligne."}),"\n",(0,r.jsx)(s.p,{children:"Pour r\xe9cup\xe9rer le JSON (en PHP) :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-php",children:"// Cl\xe9 de la spreadsheet\n$key = '0AmViBjefqXQgdG43QVJpcUhDeXU1NGpWSS1DWW9RNkE';\n\n$spreadsheet = sprintf('https://spreadsheets.google.com/feeds/list/%s/1/public/values?alt=json', $key);\n$data = json_decode(file_get_contents($spreadsheet), true);\n"})}),"\n",(0,r.jsx)(s.p,{children:"Maintenant, il ne reste plus qu'\xe0 faire une boucle sur chaque ligne et d'en afficher le contenu. En l'occurrence nous voulons afficher le pr\xe9nom et le nom de nos membres, ainsi qu'un lien vers son adresse e-mail."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-php",children:"// Pour chaque ligne (entr\xe9e) du tableau :\nforeach($data['feed']['entry'] as $row) {\n  echo $row['gsx$pr\xe9nom']['$t'].' '.$row['gsx$nom']['$t'].'<br>';\n  echo '<a href=\"mailto:'.$row['gsx$e-mail']['$t'].'\">'.$row['gsx$e-mail']['$t'].'</a><br>';\n}\n"})}),"\n",(0,r.jsx)(s.h2,{children:"Conclusion"}),"\n",(0,r.jsx)(s.p,{children:"On peut bien \xe9videmment aller plus loin dans la complexit\xe9, jusqu'\xe0 cr\xe9er un petit moteur de blog sur ce principe. N\xe9anmoins, il reste plus ad\xe9quat d'utiliser une \"vraie\" base de donn\xe9es dans le cas d'un site plus complexe."}),"\n",(0,r.jsx)(s.p,{children:"L'avantage de ce syst\xe8me r\xe9side dans le fait que les donn\xe9es restent accessibles et \xe9ditables directement \xe0 la source pour le client. Il pourra, en effet, y faire directement ses modifications, mais aussi changer le statut d'une ligne en passant une valeur de TRUE \xe0 FALSE par exemple ;)"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"http://antistatique.net/blog/2014/03/11/google-drive-comme-cms/",children:"Retrouver cet article sur le blog d'Antistatique !"})})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(a,{...e,children:(0,r.jsx)(l,{...e})})}},62090:function(e,s,n){"use strict";n.d(s,{Z:function(){return d}});var r=n(85893);n(67294);var t=n(90512),o=n(41664),i=n.n(o),a=n(68658),l=n(81612),d=e=>{let{crumbs:s}=e;return(0,r.jsx)("nav",{"aria-label":"breadcrumb",className:"mb-6 transform md:translate-x-1 md:mb-0",children:(0,r.jsxs)("ol",{className:"inline-flex text-sm text-gray-600 lowercase md:text-lg opacity-60 hover:opacity-100 duration-500 transition-opacity transform md:-translate-x-full md:translate-y-2 md:-rotate-90 md:origin-right",children:[(0,r.jsx)("li",{children:(0,r.jsxs)(i(),{href:"/",className:"link",children:[(0,r.jsx)("span",{className:"sr-only",children:"Homepage"}),(0,r.jsx)(l.Z,{name:"tipi",className:"text-base md:text-lg"})]})}),s.map((e,s)=>{let{href:n,label:o}=e;return(0,a.Z)(n)?(0,r.jsxs)("li",{"aria-current":"page",children:[(0,r.jsx)("span",{className:"px-3","aria-hidden":!0,children:"\xb7"}),(0,r.jsx)("span",{className:(0,t.Z)("inline-block truncate",{maxWidth:250}),children:o})]},"crumb-".concat(s)):(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"px-3","aria-hidden":!0,children:"\xb7"}),(0,r.jsx)(i(),{href:n,className:"link",children:o})]},"crumb-".concat(s))})]})})}},47439:function(e,s,n){"use strict";n.d(s,{Z:function(){return m}});var r=n(85893);n(67294);var t=n(47906),o=n(63595),i=n(62090),a=n(73574),l=n(29454),d=n(53659),c=n(8523),u=n(35045),m=e=>{let{children:s,meta:n}=e;return(0,r.jsxs)(d.Z,{outsideChildren:(0,r.jsx)(c.Z,{}),children:[(0,r.jsx)(u.Z,{title:n.title,description:n.description}),(0,r.jsx)(i.Z,{crumbs:[{href:"/blog",label:"Blog"},{label:n.title}]}),(0,r.jsxs)("article",{className:"w-full mx-auto mt-20 sm:w-10/12 md:w-2/3 xl:w-7/12 md:px-8",children:[(0,r.jsxs)(l.Z,{move:!1,children:[(0,r.jsx)("h1",{className:"text-3xl font-medium text-gray-900 md:text-4xl lg:text-5xl",children:n.title}),(0,r.jsx)(a.Z,{children:(0,r.jsxs)("h2",{className:"font-medium md:text-lg",children:[(0,r.jsx)("span",{children:"Yann Gouffon â€” "}),(0,t.WU)((0,o.D)(n.date),"PPP")]})})]}),(0,r.jsx)(l.Z,{className:"mt-16 font-serif text-lg text-gray-900 space-y-6 md:mt-14 prose-headings:pt-4 prose-p:leading-[1.618em] lg:text-xl xl:text-2xl xl:prose-p:leading-[1.618em] prose-a:text-blue prose-headings:font-sans prose-headings:font-medium prose-h2:text-[26px] xl:prose-h2:text-[28px] prose-h3:text-[19px] lg:prose-h3:text-[24px] xl:prose-h3:text-[27px] prose-h4:text-[18px] lg:prose-h4:text-[21px] xl:prose-h4:text-[25px] prose-strong:text-medium prose-ul:list-disc prose-ul:pl-3 prose-ul:space-y-3 prose-ul:leading-[1.618em] xl:prose-figure:w-[106%] xl:prose-figure:-translate-x-[2.8%] prose-figure:rounded-lg prose-figure:overflow-hidden prose-figure:my-8",children:s})]})]})}}},function(e){e.O(0,[1635,9757,3880,520,5098,7539,8523,2888,9774,179],function(){return e(e.s=38919)}),_N_E=e.O()}]);