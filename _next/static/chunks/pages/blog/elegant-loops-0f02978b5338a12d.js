(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3454],{41734:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/elegant-loops",function(){return r(85900)}])},85900:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return c},meta:function(){return o}});var t=r(85893),s=r(11151),a=r(47439);let o={path:"/blog/elegant-loops",title:"Elegant loops",date:"2018-12-20T00:00:00.000Z",type:"post",description:"JavaScript offers a lot of ways when you need to loop over an array and do stuff. Here are my recommendations about when and how to use them, mainly for the sake of code clarity and readability."},i=e=>{let{children:n}=e;return(0,t.jsx)(a.Z,{meta:o,children:n})};function l(e){let n={a:"a",code:"code",em:"em",h2:"h2",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"JavaScript offers a lot of ways when you need to loop over an array and do stuff"}),". Here are my recommendations about when and how to use them, mainly for the sake of code clarity and readability."]}),"\n",(0,t.jsx)(n.p,{children:"Take this array :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'const spiderMovies = [\n  {\n    title: "Spider Man",\n    year: 2002,\n  },\n  {\n    title: "Spider-Man 2",\n    year: 2004,\n  },\n  {\n    title: "Spider Man 3",\n    year: 2007,\n  },\n  {\n    title: "The Amazing Spider-Man",\n    year: 2012,\n  },\n  {\n    title: "The Amazing Spider-Man 2",\n    year: 2014,\n  },\n  {\n    title: "Spider-Man: Homecoming",\n    year: 2017,\n  },\n  {\n    title: "Spider-Man: Into the Spiderverse",\n    year: 2018,\n  },\n  {\n    title: "Spider-Man: Homecoming Sequel",\n    year: 2019,\n  },\n];\n'})}),"\n",(0,t.jsx)(n.h2,{children:"Case #1: Change each value with something else"}),"\n",(0,t.jsxs)(n.p,{children:["Based on our ",(0,t.jsx)(n.code,{children:"\x1cspiderMovies"})," array, we want to create a new array containing only the titles to have something simpler. ",(0,t.jsxs)(n.strong,{children:["So we need to iterate over each array's value and keep only the ",(0,t.jsx)(n.code,{children:"title"})," property"]}),". For \x1cthis kind of case, ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map",children:(0,t.jsx)(n.code,{children:"Array.prototype.map()"})})," is the most elegant way to do it, because each value must return something new (or not) and we still maintain the array ",(0,t.jsx)(n.code,{children:"length"}),"\x1c. Finally, you will directly assign the result of your ",(0,t.jsx)(n.code,{children:".map()"})," to a new array variable."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const spiderMoviesTitles = \x1cspiderMovies.map(movie => movie.title);\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Case #2: Filter some value"}),"\n",(0,t.jsxs)(n.p,{children:["In this case, we simply want to keep only the movies produced after 2010. ",(0,t.jsxs)(n.strong,{children:["The most indicated and obvious way to do it is to use ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter",children:(0,t.jsx)(n.code,{children:"Array.prototype.filter()"})})]}),". Instead of returning a value, you will return ",(0,t.jsx)(n.code,{children:"true"})," or ",(0,t.jsx)(n.code,{children:"false"})," depending if you want to keep it or not."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const spiderMoviesRecent = \x1cspiderMovies.filter(movie => movie.year > 2010);\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Case #3: Create something new, based on your array"}),"\n",(0,t.jsxs)(n.p,{children:["This time, something more tricky; we want to get the sum of all the movies production years (I know, it's pointless). ",(0,t.jsxs)(n.strong,{children:["Each time you need to produce something more “complex” based on an array, ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce",children:(0,t.jsx)(n.code,{children:"Array.prototype.reduce()"})})," must be your tool of choice."]})]}),"\n",(0,t.jsxs)(n.p,{children:["As the first two cases, ",(0,t.jsx)(n.code,{children:".reduce()"})," will iterate on each array value, but instead of returning the transformed value as with ",(0,t.jsx)(n.code,{children:".map()"}),", you must return something unique with ",(0,t.jsx)(n.code,{children:".reduce()"}),": the ",(0,t.jsx)(n.strong,{children:"accumulator"}),".  Basically, it can be any kind of value (initially defined after the callback method) that will evolve on each iteration."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const spiderYears = spiderMovies.reduce((acc, value) => acc + value.year, 0);\n\n// or (more readable ?)\nconst spiderYears = spiderMovies.reduce((acc, value) => {\n  const updatedAcc = acc + value.year;\n  return updatedAcc;\n}, 0);\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Case #4: Do something on each iteration"}),"\n",(0,t.jsxs)(n.p,{children:["This time you don't want to create anything, but you want to push array content to your remote database. For some reason and because it's an example, you can only pass one object per push. ",(0,t.jsxs)(n.strong,{children:["So you don't want to create or return anything and because of it, ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/foreach",children:(0,t.jsx)(n.code,{children:"Array.prototype.forEach()"})})," is the most elegant way to do it."]})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"spiderMovies.forEach(movie => {\n  pushToDatabase(movie);\n});\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Bonus"}),"\n",(0,t.jsxs)(n.p,{children:["At this point, you must think:\n“Wtf man! Why are you not using ",(0,t.jsx)(n.code,{children:"for"}),"?”"]}),"\n",(0,t.jsxs)(n.p,{children:["Good question ! You can surely and it's definitely more efficient on almost any cases I present you above (see ",(0,t.jsx)(n.a,{href:"https://github.com/dg92/Performance-Analysis-JS",children:"this benchmark"}),")."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// Array.prototype.map() equivalent\nconst spiderMoviesTitles = [];\nfor (let i = 0; i < spiderMovies.length; i++) {\n  spiderMoviesTitles.push(spiderMovies[i].title);\n}\n\n// Array.prototype.filter() equivalent\nconst spiderMoviesRecent = [];\nfor (let i = 0; i < spiderMovies.length; i++) {\n  if (spiderMovies[i].year > 2010) {\n    spiderMoviesRecent.push(spiderMovies[i]); \n  }\n}\n\n// Array.prototype.reduce() equivalent\nlet spiderYears = 0;\nfor (let i = 0; i < spiderMovies.length; i++) {\n  spiderYears = spiderYears + spiderMovies[i].year;\n}\n\n// Array.prototype.forEach() equivalent\nfor (let i = 0; i < spiderMovies.length; i++) {\n  pushToDatabase(spiderMovies[i]);\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["OK, it's more efficient, but what about code readability and elegance ?  At this point, ",(0,t.jsx)(n.strong,{children:"you must decide if you can live with this small (in most cases) performance tradeoffs"})," and keep your code clean. At the end, for “small” loops, you won't feel this tradeoff (~0.1ms), but when you start dealing with a large number of iterations, the cost will quickly rise in opposite of your performances."]}),"\n",(0,t.jsx)(n.h2,{children:"Conclusion"}),"\n",(0,t.jsxs)(n.p,{children:["There is never one true best way for looping through arrays. Based on the example cases above, you should be more aware to pick to right one. ",(0,t.jsx)(n.strong,{children:"It's your call to decide what is best for your case and the sake of your application"}),". And if you are not sure about the right one to use, benchmark your choices using a simple ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Console/time",children:(0,t.jsx)(n.code,{children:"console.time()"})})," and you will be quickly fixed."]}),"\n",(0,t.jsx)(n.p,{children:"Happy coding!"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"Supported with"})," \uD83D\uDC9B ",(0,t.jsxs)(n.em,{children:["by ",(0,t.jsx)(n.a,{href:"https://antistatique.net",children:"Antistatique"})]})]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.jsx)(i,{...e,children:(0,t.jsx)(l,{...e})})}},62090:function(e,n,r){"use strict";r.d(n,{Z:function(){return c}});var t=r(85893);r(67294);var s=r(90512),a=r(41664),o=r.n(a),i=r(68658),l=r(81612),c=e=>{let{crumbs:n}=e;return(0,t.jsx)("nav",{"aria-label":"breadcrumb",className:"mb-6 transform md:translate-x-1 md:mb-0",children:(0,t.jsxs)("ol",{className:"inline-flex text-sm text-gray-600 lowercase md:text-lg opacity-60 hover:opacity-100 duration-500 transition-opacity transform md:-translate-x-full md:translate-y-2 md:-rotate-90 md:origin-right",children:[(0,t.jsx)("li",{children:(0,t.jsxs)(o(),{href:"/",className:"link",children:[(0,t.jsx)("span",{className:"sr-only",children:"Homepage"}),(0,t.jsx)(l.Z,{name:"tipi",className:"text-base md:text-lg"})]})}),n.map((e,n)=>{let{href:r,label:a}=e;return(0,i.Z)(r)?(0,t.jsxs)("li",{"aria-current":"page",children:[(0,t.jsx)("span",{className:"px-3","aria-hidden":!0,children:"\xb7"}),(0,t.jsx)("span",{className:(0,s.Z)("inline-block truncate",{maxWidth:250}),children:a})]},"crumb-".concat(n)):(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"px-3","aria-hidden":!0,children:"\xb7"}),(0,t.jsx)(o(),{href:r,className:"link",children:a})]},"crumb-".concat(n))})]})})}},47439:function(e,n,r){"use strict";r.d(n,{Z:function(){return p}});var t=r(85893);r(67294);var s=r(47906),a=r(63595),o=r(62090),i=r(73574),l=r(29454),c=r(53659),d=r(8523),h=r(35045),p=e=>{let{children:n,meta:r}=e;return(0,t.jsxs)(c.Z,{outsideChildren:(0,t.jsx)(d.Z,{}),children:[(0,t.jsx)(h.Z,{title:r.title,description:r.description}),(0,t.jsx)(o.Z,{crumbs:[{href:"/blog",label:"Blog"},{label:r.title}]}),(0,t.jsxs)("article",{className:"w-full mx-auto mt-20 sm:w-10/12 md:w-2/3 xl:w-7/12 md:px-8",children:[(0,t.jsxs)(l.Z,{move:!1,children:[(0,t.jsx)("h1",{className:"text-3xl font-medium text-gray-900 md:text-4xl lg:text-5xl",children:r.title}),(0,t.jsx)(i.Z,{children:(0,t.jsxs)("h2",{className:"font-medium md:text-lg",children:[(0,t.jsx)("span",{children:"Yann Gouffon — "}),(0,s.WU)((0,a.D)(r.date),"PPP")]})})]}),(0,t.jsx)(l.Z,{className:"mt-16 font-serif text-lg text-gray-900 space-y-6 md:mt-14 prose-headings:pt-4 prose-p:leading-[1.618em] lg:text-xl xl:text-2xl xl:prose-p:leading-[1.618em] prose-a:text-blue prose-headings:font-sans prose-headings:font-medium prose-h2:text-[26px] xl:prose-h2:text-[28px] prose-h3:text-[19px] lg:prose-h3:text-[24px] xl:prose-h3:text-[27px] prose-h4:text-[18px] lg:prose-h4:text-[21px] xl:prose-h4:text-[25px] prose-strong:text-medium prose-ul:list-disc prose-ul:pl-3 prose-ul:space-y-3 prose-ul:leading-[1.618em] xl:prose-figure:w-[106%] xl:prose-figure:-translate-x-[2.8%] prose-figure:rounded-lg prose-figure:overflow-hidden prose-figure:my-8",children:n})]})]})}}},function(e){e.O(0,[1635,9757,3880,520,5098,7539,8523,2888,9774,179],function(){return e(e.s=41734)}),_N_E=e.O()}]);